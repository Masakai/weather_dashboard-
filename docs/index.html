<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Â§©‰ΩìË¶≥Ê∏¨„Åß„Åç„Çã„Åã„Å™Ôºü</title>

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-6Q6VBQNM11"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-6Q6VBQNM11');
    </script>

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.4/moment.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.4/locale/ja.js"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <!-- Leaflet (Map) -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <!-- Astronomy Engine for planetary calculations -->
    <script src="https://cdn.jsdelivr.net/npm/astronomy-engine@2.1.19/astronomy.browser.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/satellite.js/5.0.0/satellite.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap');
        body { font-family: 'Noto Sans JP', sans-serif; }
        .glass-panel {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        /* Date picker custom styles for dark mode compatibility */
        input[type="datetime-local"] {
            color-scheme: dark;
        }
        #map {
            height: 300px;
            width: 100%;
            border-radius: 0.75rem;
            z-index: 1;
        }
        /* Leaflet customization */
        .leaflet-container {
            background: #1e293b;
        }
        /* Night Vision Mode */
        body.night-vision {
            filter: hue-rotate(180deg) invert(1);
            background: #300000 !important;
        }
        body.night-vision .glass-panel {
            background: rgba(100, 0, 0, 0.3) !important;
            border-color: rgba(200, 0, 0, 0.3) !important;
        }
        body.night-vision * {
            color: #ff6666 !important;
            border-color: #ff3333 !important;
        }
        /* Starry Score Meter */
        .score-meter {
            width: 200px;
            height: 200px;
            position: relative;
        }
        .score-circle {
            stroke-dasharray: 440;
            stroke-dashoffset: 440;
            transition: stroke-dashoffset 1s ease;
        }
        /* Timeline styles */
        .timeline-bar {
            position: relative;
            height: 60px;
            background: linear-gradient(to right, #1e293b 0%, #0f172a 50%, #1e293b 100%);
            border-radius: 8px;
            overflow: hidden;
        }
        .timeline-segment {
            position: absolute;
            height: 100%;
            opacity: 0.7;
        }
        /* Mobile Menu */
        #mobile-menu {
            transition: transform 0.3s ease-in-out;
            transform: translateX(100%);
        }
        #mobile-menu.active {
            transform: translateX(0);
        }
    </style>
</head>
<body class="bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 text-white min-h-screen p-4 md:p-8">

    <!-- „Éè„É≥„Éê„Éº„Ç¨„Éº„É°„Éã„É•„Éº („É¢„Éê„Ç§„É´„Éª„Éá„Çπ„ÇØ„Éà„ÉÉ„ÉóÂÖ±ÈÄö) -->
    <div id="mobile-menu-overlay" class="hidden fixed inset-0 bg-black/50 z-40 backdrop-blur-sm" onclick="toggleMenu()"></div>
    <div id="mobile-menu" class="fixed top-0 right-0 h-full w-64 bg-slate-900/95 border-l border-slate-700 z-50 p-6 shadow-2xl overflow-y-auto">
        <div class="flex justify-between items-center mb-8">
            <h2 class="text-xl font-bold flex items-center gap-2">
                <i data-lucide="menu" class="w-5 h-5"></i> „É°„Éã„É•„Éº
            </h2>
            <button onclick="toggleMenu()" class="text-slate-400 hover:text-white transition">
                <i data-lucide="x" class="w-6 h-6"></i>
            </button>
        </div>
        <nav class="space-y-4">
            <button onclick="toggleMap(); toggleMenu();" class="w-full flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-slate-800 transition text-left">
                <i data-lucide="map" class="w-5 h-5 text-green-400"></i>
                <span>Â†¥ÊâÄ„ÇíÂ§âÊõ¥ (Âú∞Âõ≥)</span>
            </button>
            <button onclick="getCurrentLocation(); toggleMenu();" class="w-full flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-slate-800 transition text-left">
                <i data-lucide="crosshair" class="w-5 h-5 text-blue-400"></i>
                <span>ÁèæÂú®Âú∞„ÇíÂèñÂæó</span>
            </button>
            <button onclick="toggleNightVision(); toggleMenu();" class="w-full flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-slate-800 transition text-left">
                <i data-lucide="moon" class="w-5 h-5 text-red-400"></i>
                <span>„Éä„Ç§„Éà„Éì„Ç∏„Éß„É≥</span>
            </button>
            <div class="border-t border-slate-800 pt-4 mt-4">
                <p class="text-xs text-slate-500 px-4 mb-2">„Éë„Éç„É´ÁßªÂãï</p>
                <button onclick="scrollToSection('section-score')" class="w-full flex items-center gap-3 px-4 py-2 rounded-lg hover:bg-slate-800 transition text-left">
                    <i data-lucide="sparkles" class="w-4 h-4 text-yellow-400"></i>
                    <span class="text-sm">Ë¶ñË™çÊÄß„Çπ„Ç≥„Ç¢</span>
                </button>
                <button onclick="scrollToSection('section-weather')" class="w-full flex items-center gap-3 px-4 py-2 rounded-lg hover:bg-slate-800 transition text-left">
                    <i data-lucide="gauge" class="w-4 h-4 text-blue-400"></i>
                    <span class="text-sm">Ê∞óË±°Ë©≥Á¥∞</span>
                </button>
                <button onclick="scrollToSection('section-observation')" class="w-full flex items-center gap-3 px-4 py-2 rounded-lg hover:bg-slate-800 transition text-left">
                    <i data-lucide="moon-star" class="w-4 h-4 text-purple-400"></i>
                    <span class="text-sm">Ë¶≥Ê∏¨Ë®àÁîª</span>
                </button>
                <button onclick="scrollToSection('section-events')" class="w-full flex items-center gap-3 px-4 py-2 rounded-lg hover:bg-slate-800 transition text-left">
                    <i data-lucide="star" class="w-4 h-4 text-yellow-400"></i>
                    <span class="text-sm">Â§©‰Ωì„Ç§„Éô„É≥„Éà</span>
                </button>
                <button onclick="scrollToSection('section-charts')" class="w-full flex items-center gap-3 px-4 py-2 rounded-lg hover:bg-slate-800 transition text-left">
                    <i data-lucide="radar" class="w-4 h-4 text-pink-400"></i>
                    <span class="text-sm">‰∫àÂ†±„ÉÅ„É£„Éº„Éà</span>
                </button>
                <button onclick="scrollToSection('section-weekly')" class="w-full flex items-center gap-3 px-4 py-2 rounded-lg hover:bg-slate-800 transition text-left">
                    <i data-lucide="calendar" class="w-4 h-4 text-green-400"></i>
                    <span class="text-sm">ÈÄ±Èñì‰∫àÂ†±</span>
                </button>
            </div>
            <div class="border-t border-slate-800 pt-4 mt-4">
                <p class="text-xs text-slate-500 px-4 mb-2">„É™„É≥„ÇØ</p>
                <a href="https://github.com/m-sakaimono/weather_dashboard" target="_blank" class="flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-slate-800 transition">
                    <i data-lucide="github" class="w-5 h-5"></i>
                    <span>GitHub</span>
                </a>
            </div>
        </nav>
        <div class="absolute bottom-6 left-6 right-6">
            <div class="text-xs text-slate-500 text-center">
                Ver. 3.3.6
            </div>
        </div>
    </div>

    <!-- ISSÈÄöÈÅéÈÄöÁü•„Éê„Éä„Éº -->
    <div id="iss-notification-banner" class="hidden fixed top-4 left-1/2 transform -translate-x-1/2 z-50 max-w-md w-full mx-4">
        <div class="bg-gradient-to-r from-yellow-500/95 to-orange-500/95 backdrop-blur-sm rounded-xl shadow-2xl border-2 border-yellow-300/50 p-4">
            <div class="flex items-start gap-3">
                <i data-lucide="satellite" class="w-6 h-6 text-white flex-shrink-0 mt-0.5"></i>
                <div class="flex-1">
                    <div class="font-bold text-white text-base mb-1">üõ∞Ô∏è ISSÈÄöÈÅé„Åæ„ÇÇ„Å™„ÅèÔºÅ</div>
                    <div id="iss-notification-text" class="text-white text-sm"></div>
                </div>
                <button onclick="closeISSNotification()" class="text-white hover:text-yellow-100 transition flex-shrink-0">
                    <i data-lucide="x" class="w-5 h-5"></i>
                </button>
            </div>
        </div>
    </div>

    <div class="max-w-6xl mx-auto space-y-6">
        
        <!-- „Éò„ÉÉ„ÉÄ„Éº -->
        <header class="flex flex-col md:flex-row justify-between items-center gap-4">
            <div class="flex-1">
                <!-- „É°„Ç§„É≥„Çø„Ç§„Éà„É´ -->
                <h1 class="text-3xl md:text-5xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-yellow-100 via-blue-200 to-blue-400 mb-3 flex items-center gap-3">
                    <i data-lucide="telescope" class="text-yellow-200 w-8 h-8 md:w-12 md:h-12"></i>
                    Â§©‰ΩìË¶≥Ê∏¨„Åß„Åç„Çã„Åã„Å™Ôºü
                </h1>
                
                <!-- Â†¥ÊâÄÊÉÖÂ†± -->
                <div class="flex items-center gap-2 text-2xl font-semibold text-slate-200 pl-1">
                    <i data-lucide="map-pin" class="text-blue-400"></i>
                    <span id="location-name">‰ΩçÁΩÆÊÉÖÂ†±„ÇíÂèñÂæó‰∏≠...</span>
                </div>
                <p class="text-slate-400 text-base mt-1 flex items-center gap-2 pl-1">
                    <span id="coords-display">Á∑ØÂ∫¶: -- | ÁµåÂ∫¶: --</span>
                    <button onclick="toggleMap()" class="text-blue-300 hover:text-white underline text-sm ml-2">
                        Âú∞Âõ≥„ÅßÂ†¥ÊâÄ„ÇíÂ§âÊõ¥
                    </button>
                </p>
            </div>
            <div class="text-right flex flex-col items-end">
                <div class="flex items-center gap-3">
                    <div id="current-clock" class="text-2xl font-semibold font-mono">--:--:--</div>
                    <button onclick="toggleMenu()" class="p-2 hover:bg-slate-800 rounded-lg transition" title="„É°„Éã„É•„Éº">
                        <i data-lucide="menu" class="w-8 h-8"></i>
                    </button>
                </div>
                <div class="text-slate-400 text-base">ÁèæÂú®ÊôÇÂàª (Asia/Tokyo)</div>
                <div class="text-slate-500 text-sm mt-2 flex items-center gap-2">
                    Ver. 3.3.5
                    <button onclick="toggleNightVision()" class="text-sm bg-red-900/30 hover:bg-red-800/50 px-2 py-1 rounded border border-red-600/30" title="„Éä„Ç§„Éà„Éì„Ç∏„Éß„É≥„É¢„Éº„Éâ">
                        <i data-lucide="moon" class="w-4 h-4 inline"></i>
                    </button>
                </div>
            </div>
        </header>

        <!-- Âú∞Âõ≥„Éª‰ΩçÁΩÆË®≠ÂÆö„Ç®„É™„Ç¢ (ÂàùÊúü„ÅØÈùûË°®Á§∫) -->
        <div id="location-settings" class="hidden glass-panel rounded-xl p-4 space-y-4">
            <div class="flex flex-wrap justify-between items-center gap-4">
                <h3 class="font-bold flex items-center gap-2 text-lg">
                    <i data-lucide="map" class="w-5 h-5 text-green-400"></i> Âú∞Âõ≥„Åã„ÇâÂ†¥ÊâÄ„ÇíÈÅ∏Êäû
                </h3>
                <button onclick="getCurrentLocation()" class="bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg text-base font-medium transition flex items-center gap-2">
                    <i data-lucide="crosshair" class="w-4 h-4"></i> ÁèæÂú®Âú∞„ÇíÂèñÂæó
                </button>
            </div>
            <p class="text-base text-slate-300">Âú∞Âõ≥„Çí„ÇØ„É™„ÉÉ„ÇØ„Åô„Çã„Å®„ÄÅ„Åù„ÅÆÂ†¥ÊâÄ„ÅÆÂ§©Ê∞ó„ÇíË°®Á§∫„Åó„Åæ„Åô„ÄÇ</p>
            <div id="map"></div>
        </div>

        <!-- „Ç≥„É≥„Éà„É≠„Éº„É´„Éê„Éº (Êó•ÊôÇÊåáÂÆö) -->
        <div class="glass-panel rounded-xl p-4 flex flex-col sm:flex-row items-center justify-between gap-4">
            <div class="flex items-center gap-2 text-base md:text-lg">
                <i data-lucide="settings-2" class="text-slate-300 w-5 h-5"></i>
                <span class="font-bold">Ë°®Á§∫Êó•ÊôÇ„ÇíÊåáÂÆö:</span>
            </div>
            <div class="flex items-center gap-3 w-full sm:w-auto">
                <input type="datetime-local" id="target-datetime"
                    class="bg-slate-800 border border-slate-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-blue-400 w-full sm:w-auto font-mono text-base"
                    step="900"
                    onchange="updateDashboardTime()"
                    title="Êó•‰ªò„Å®ÊôÇÂàª„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ">

                <button onclick="resetToNow()" class="bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg text-base font-medium transition whitespace-nowrap">
                    ÁèæÂú®„Å´Êàª„Åô
                </button>
            </div>
        </div>

        <!-- „É≠„Éº„Éâ‰∏≠Ë°®Á§∫ -->
        <div id="loading" class="text-center py-20 text-xl animate-pulse">Â§©Ê∞ó„Éá„Éº„Çø„ÇíÂèñÂæó‰∏≠...</div>
        
        <div id="dashboard-content" class="hidden space-y-6">
            <!-- ÊòüÁ©∫Ë¶ñË™çÊÄß„Çπ„Ç≥„Ç¢ÔºàÂ§ßÂûãË°®Á§∫Ôºâ -->
            <div id="section-score" class="glass-panel rounded-2xl p-4 md:p-6">
                <div class="flex flex-col md:flex-row items-center justify-between gap-6">
                    <div class="flex flex-col items-center justify-center">
                        <h3 class="text-xl font-semibold mb-4 flex items-center gap-2">
                            <i data-lucide="sparkles" class="text-yellow-400 w-5 h-5"></i> ÊòüÁ©∫Ë¶ñË™çÊÄß„Çπ„Ç≥„Ç¢
                        </h3>
                        <svg class="score-meter" viewBox="0 0 160 160">
                            <circle cx="80" cy="80" r="70" fill="none" stroke="#334155" stroke-width="12"/>
                            <circle id="score-circle" class="score-circle" cx="80" cy="80" r="70" fill="none" stroke="url(#scoreGradient)" stroke-width="12" stroke-linecap="round" transform="rotate(-90 80 80)"/>
                            <defs>
                                <linearGradient id="scoreGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                                    <stop offset="0%" style="stop-color:#ef4444;stop-opacity:1" />
                                    <stop offset="50%" style="stop-color:#eab308;stop-opacity:1" />
                                    <stop offset="100%" style="stop-color:#22c55e;stop-opacity:1" />
                                </linearGradient>
                            </defs>
                            <text id="score-text" x="80" y="75" text-anchor="middle" font-size="36" font-weight="bold" fill="#fff">--</text>
                            <text x="80" y="95" text-anchor="middle" font-size="14" fill="#94a3b8">/ 100</text>
                        </svg>
                        <p id="score-comment" class="text-base text-slate-300 mt-3 text-center">Ë®àÁÆó‰∏≠...</p>
                    </div>

                    <!-- „ÅäÊ∞ó„Å´ÂÖ•„ÇäÂú∞ÁÇπ -->
                    <div class="flex-1 w-full">
                        <h4 class="font-semibold text-base mb-3 flex items-center gap-2">
                            <i data-lucide="bookmark" class="w-4 h-4 text-blue-400"></i>
                            „ÅäÊ∞ó„Å´ÂÖ•„ÇäÂú∞ÁÇπ
                        </h4>
                        <div id="favorite-locations" class="space-y-2">
                            <button onclick="addFavoriteLocation()" class="w-full bg-slate-800/50 hover:bg-slate-700/50 rounded-lg p-3 text-base border border-slate-700 flex items-center justify-center gap-2">
                                <i data-lucide="plus" class="w-4 h-4"></i>
                                ÁèæÂú®Âú∞„Çí„ÅäÊ∞ó„Å´ÂÖ•„Çä„Å´ËøΩÂä†
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Ê∞óË±°Ë©≥Á¥∞Áµ±Âêà„Éë„Éç„É´ -->
            <div id="section-weather" class="glass-panel rounded-2xl p-4 md:p-6">
                <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4 border-b border-slate-700/50 pb-4">
                    <h3 class="text-xl font-semibold flex items-center gap-2">
                        <i data-lucide="gauge" class="text-blue-400 w-5 h-5"></i>
                        Ê∞óË±°Ë©≥Á¥∞ÔºàÊåáÂÆöÊôÇÂàªÔºâ
                    </h3>
                    <div id="today-summary-display" class="text-base md:text-lg text-slate-300 flex flex-wrap gap-4">
                        <!-- JS„Åß‰ªäÊó•„ÅÆÊúÄÈ´ò/ÊúÄ‰ΩéÊ∞óÊ∏©„ÄÅÂ§©Ê∞ó„Å™„Å©„ÇíË°®Á§∫ -->
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6">
                    <!-- Ê∞óÊ∏©„Å®Èõ≤Èáè -->
                    <div class="space-y-6">
                        <div class="flex items-center gap-4">
                            <div class="bg-orange-500/10 p-3 rounded-xl">
                                <i data-lucide="thermometer" class="w-8 h-8 text-orange-400"></i>
                            </div>
                            <div>
                                <div class="text-sm text-slate-400 uppercase tracking-wider mb-1">Ê∞óÊ∏©</div>
                                <div class="text-4xl font-bold" id="current-temp">--¬∞C</div>
                            </div>
                        </div>
                        <div class="flex items-center gap-4">
                            <div class="bg-blue-500/10 p-3 rounded-xl">
                                <i data-lucide="cloud" class="w-8 h-8 text-slate-300"></i>
                            </div>
                            <div>
                                <div class="text-sm text-slate-400 uppercase tracking-wider mb-1">ÂÖ®Â§©Èõ≤Èáè</div>
                                <div class="text-4xl font-bold" id="current-clouds">--%</div>
                            </div>
                        </div>
                    </div>

                    <!-- Èõ≤„ÅÆÂ±§Ë©≥Á¥∞ -->
                    <div class="space-y-3">
                        <div class="text-slate-400 text-sm font-medium uppercase tracking-wider mb-2">Èõ≤„ÅÆÂ±§ÔºàÈ´òÂ∫¶Âà•Ôºâ</div>
                        
                        <div>
                            <div class="flex justify-between text-sm mb-1">
                                <span class="text-slate-300 flex items-center gap-1"><i data-lucide="arrow-up" class="w-3 h-3"></i> ‰∏äÂ±§Èõ≤</span>
                                <span class="font-bold" id="clouds-high">--%</span>
                            </div>
                            <div class="w-full bg-slate-700/50 rounded-full h-1.5">
                                <div id="bar-high" class="bg-violet-400 h-1.5 rounded-full" style="width: 0%"></div>
                            </div>
                        </div>

                        <div>
                            <div class="flex justify-between text-sm mb-1">
                                <span class="text-slate-300 flex items-center gap-1"><i data-lucide="minus" class="w-3 h-3"></i> ‰∏≠Â±§Èõ≤</span>
                                <span class="font-bold" id="clouds-mid">--%</span>
                            </div>
                            <div class="w-full bg-slate-700/50 rounded-full h-1.5">
                                <div id="bar-mid" class="bg-emerald-400 h-1.5 rounded-full" style="width: 0%"></div>
                            </div>
                        </div>

                        <div>
                            <div class="flex justify-between text-sm mb-1">
                                <span class="text-slate-300 flex items-center gap-1"><i data-lucide="arrow-down" class="w-3 h-3"></i> ‰∏ãÂ±§Èõ≤</span>
                                <span class="font-bold" id="clouds-low">--%</span>
                            </div>
                            <div class="w-full bg-slate-700/50 rounded-full h-1.5">
                                <div id="bar-low" class="bg-gray-300 h-1.5 rounded-full" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Ë©≥Á¥∞„Éá„Éº„Çø -->
                    <div class="grid grid-cols-2 gap-2">
                        <div class="bg-slate-800/40 rounded-xl p-2 border border-slate-700/30">
                            <div class="text-sm text-slate-400 uppercase mb-0.5">È¢®ÈÄü</div>
                            <div class="text-base font-bold" id="wind-speed">-- m/s</div>
                            <div id="wind-direction" class="text-sm text-slate-400">--</div>
                        </div>
                        <div class="bg-slate-800/40 rounded-xl p-2 border border-slate-700/30">
                            <div class="text-sm text-slate-400 uppercase mb-0.5">Ê∞óÂúß</div>
                            <div class="text-base font-bold" id="pressure">-- hPa</div>
                        </div>
                        <div class="bg-slate-800/40 rounded-xl p-2 border border-slate-700/30">
                            <div class="text-sm text-slate-400 uppercase mb-0.5">Èú≤ÁÇπ</div>
                            <div class="text-base font-bold" id="dewpoint">--¬∞C</div>
                            <div id="condensation-risk" class="text-sm text-slate-400">--</div>
                        </div>
                        <div class="bg-slate-800/40 rounded-xl p-2 border border-slate-700/30">
                            <div class="text-sm text-slate-400 uppercase mb-0.5">Ë¶ñÁ®ã</div>
                            <div class="text-base font-bold" id="visibility">-- km</div>
                        </div>
                    </div>

                    <!-- ÊúàÈΩ¢ÊÉÖÂ†± -->
                    <div class="flex flex-col items-center justify-center bg-slate-800/20 rounded-xl p-3 border border-slate-700/30">
                        <div class="text-sm text-slate-400 mb-1 uppercase tracking-wider">Moon Phase</div>
                        <div class="text-4xl mb-1" id="current-moon-icon">üåë</div>
                        <div class="text-xl font-bold text-yellow-100" id="current-moon-age-text">--</div>
                        <div class="text-sm text-yellow-200" id="current-moon-name">--</div>
                    </div>
                </div>

                <!-- ÂàÜÊûê„Çµ„Éû„É™„Éº -->
                <div class="bg-slate-800/30 rounded-xl p-4 border-l-4 border-blue-400">
                    <p class="text-slate-300 italic text-base md:text-lg" id="forecast-summary">‰∫àÂ†±„ÇíÂàÜÊûê‰∏≠...</p>
                    <p class="text-sm text-slate-500 mt-2" id="summary-timestamp">--</p>
                </div>
            </div>

            <!-- Ë¶≥Ê∏¨Ë®àÁîªÁµ±Âêà„Éë„Éç„É´ -->
            <div id="section-observation" class="glass-panel rounded-2xl p-4 md:p-6">
                <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6 border-b border-slate-700/50 pb-4 gap-2">
                    <h3 class="text-xl font-semibold flex items-center gap-2">
                        <i data-lucide="moon-star" class="text-purple-400 w-5 h-5"></i>
                        ‰ªäÂ§ú„ÅÆË¶≥Ê∏¨Ë®àÁîªÔºàÊó•Ê≤°„ÄúÊó•„ÅÆÂá∫Ôºâ
                    </h3>
                    <div id="timeline-period" class="text-sm text-slate-400 font-mono"></div>
                </div>

                <!-- „Çø„Ç§„É†„É©„Ç§„É≥„Çª„ÇØ„Ç∑„Éß„É≥ -->
                <div class="mb-8">
                    <div id="timeline-container" class="timeline-bar"></div>
                    <div id="timeline-labels" class="flex items-center justify-between mt-3 text-sm text-slate-400 mb-4"></div>
                    
                    <div class="flex items-center gap-4 text-sm md:text-base flex-wrap bg-slate-800/30 p-3 rounded-xl border border-slate-700/30">
                        <div class="flex items-center gap-1.5">
                            <div class="w-4 h-4 bg-blue-500 opacity-70 rounded-sm"></div>
                            <span class="text-slate-300">ËñÑÊòé</span>
                        </div>
                        <div class="flex items-center gap-1.5">
                            <div class="w-4 h-4 bg-green-500 opacity-70 rounded-sm"></div>
                            <span class="text-slate-300">ÈÅ©ÊôÇ (0-20%)</span>
                        </div>
                        <div class="flex items-center gap-1.5">
                            <div class="w-4 h-4 bg-yellow-500 opacity-70 rounded-sm"></div>
                            <span class="text-slate-300">Ê≥®ÊÑè (20-50%)</span>
                        </div>
                        <div class="flex items-center gap-1.5">
                            <div class="w-4 h-4 bg-orange-500 opacity-70 rounded-sm"></div>
                            <span class="text-slate-300">‰∏çÈÅ© (50-80%)</span>
                        </div>
                        <div class="flex items-center gap-1.5">
                            <div class="w-4 h-4 bg-red-500 opacity-70 rounded-sm"></div>
                            <span class="text-slate-300">‰∏çÂèØ (80-100%)</span>
                        </div>
                        <div class="md:ml-auto text-slate-500 italic text-sm">‚ÄªËâ≤„ÅØÈõ≤Èáè„Å´„Çà„ÇãË¶≥Ê∏¨ÈÅ©ÊÄß„ÇíÁ§∫„Åó„Åæ„Åô</div>
                    </div>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- Â∑¶„Ç´„É©„É†: Ë¶≥Ê∏¨Êé®Â•®ÊôÇÈñì -->
                    <div class="space-y-4">
                        <div class="bg-green-500/10 rounded-xl p-4 border border-green-500/20">
                            <div class="text-sm text-green-400 mb-3 flex items-center gap-1.5 font-bold uppercase tracking-wider">
                                <i data-lucide="telescope" class="w-4 h-4"></i> Ë¶≥Ê∏¨„Å´ÊúÄÈÅ©„Å™ÊôÇÈñìÂ∏Ø
                            </div>
                            <div class="flex items-center justify-around">
                                <div class="text-center">
                                    <div class="text-sm text-slate-400 mb-1">Ë¶≥Ê∏¨ÈñãÂßã (Â§©ÊñáËñÑÊòéÁµÇ‰∫Ü)</div>
                                    <div class="font-mono font-bold text-3xl text-green-300" id="observation-start-time">--:--</div>
                                </div>
                                <div class="text-slate-600 text-3xl font-light">‚Üí</div>
                                <div class="text-center">
                                    <div class="text-sm text-slate-400 mb-1">Ë¶≥Ê∏¨ÁµÇ‰∫Ü (Â§©ÊñáËñÑÊòéÈñãÂßã)</div>
                                    <div class="font-mono font-bold text-3xl text-orange-300" id="observation-end-time">--:--</div>
                                </div>
                            </div>
                        </div>

                        <div class="grid grid-cols-2 gap-4">
                            <div class="bg-slate-800/40 rounded-xl p-4 border border-slate-700/30">
                                <div class="text-sm text-orange-400 mb-2 flex items-center gap-1.5 font-bold">
                                    <i data-lucide="sunset" class="w-4 h-4"></i> Â§ïÊñπ„ÅÆÊµÅ„Çå
                                </div>
                                <div class="flex justify-between items-baseline">
                                    <span class="text-sm text-slate-400">Êó•„ÅÆÂÖ•„Çä</span>
                                    <span class="font-mono font-bold text-xl" id="sunset-time">--:--</span>
                                </div>
                            </div>
                            <div class="bg-slate-800/40 rounded-xl p-4 border border-slate-700/30">
                                <div class="text-sm text-blue-400 mb-2 flex items-center gap-1.5 font-bold">
                                    <i data-lucide="sunrise" class="w-4 h-4"></i> ÊúùÊñπ„ÅÆÊµÅ„Çå
                                </div>
                                <div class="flex justify-between items-baseline">
                                    <span class="text-sm text-slate-400">Êó•„ÅÆÂá∫</span>
                                    <span class="font-mono font-bold text-xl" id="sunrise-time">--:--</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Âè≥„Ç´„É©„É†: Êúà„ÅÆÁä∂Ê≥Å -->
                    <div class="bg-slate-800/40 rounded-xl p-4 border border-slate-700/30 flex flex-col justify-center">
                        <div class="text-sm text-yellow-400 mb-4 flex items-center gap-1.5 font-bold uppercase tracking-wider">
                            <i data-lucide="moon" class="w-4 h-4"></i> Êúà„ÅÆÂá∫Ê≤°ÔºàÊúàÊòé„Åã„Çä„ÅÆÂΩ±ÈüøÔºâ
                        </div>
                        <div class="grid grid-cols-2 gap-4 mb-4">
                            <div class="flex flex-col items-center p-3 bg-slate-900/40 rounded-lg">
                                <span class="text-sm text-slate-500 mb-1 uppercase">Moonrise</span>
                                <span class="font-mono font-bold text-2xl text-slate-200" id="moonrise-time">--:--</span>
                            </div>
                            <div class="flex flex-col items-center p-3 bg-slate-900/40 rounded-lg">
                                <span class="text-sm text-slate-500 mb-1 uppercase">Moonset</span>
                                <span class="font-mono font-bold text-2xl text-slate-200" id="moonset-time">--:--</span>
                            </div>
                        </div>
                        <p class="text-sm text-slate-400 bg-slate-900/30 p-3 rounded-lg italic">
                            ‚Äª Êúà„ÅåÂá∫„Å¶„ÅÑ„ÇãÈñì„ÅØÊ∑°„ÅÑÂ§©‰Ωì„ÅåË¶ã„Åà„Å´„Åè„Åè„Å™„Çä„Åæ„Åô„ÄÇ
                        </p>
                    </div>
                </div>
            </div>

            <!-- Â§©‰Ωì„Ç§„Éô„É≥„ÉàÊÉÖÂ†±„Çª„ÇØ„Ç∑„Éß„É≥ -->
            <div id="section-events" class="glass-panel rounded-2xl p-4 md:p-6">
                <h3 class="text-xl font-semibold mb-4 flex items-center gap-2">
                    <i data-lucide="star" class="text-yellow-400 w-5 h-5"></i> Â§©‰Ωì„Ç§„Éô„É≥„ÉàÊÉÖÂ†±
                </h3>

                <div class="space-y-3">
                    <!-- Â§©Êñá„Ç§„Éô„É≥„ÉàÔºàÊúàÈ£ü„ÉªÊó•È£ü„Å™„Å©Ôºâ -->
                    <div class="bg-slate-800/50 rounded-xl border border-slate-700 overflow-hidden">
                        <button onclick="toggleAccordion('astronomical-events')" class="w-full p-4 flex items-center justify-between hover:bg-slate-700/30 transition">
                            <div class="flex items-center gap-2">
                                <i data-lucide="moon" class="w-4 h-4 text-orange-400"></i>
                                <span class="font-semibold text-base">Â§©Êñá„Ç§„Éô„É≥„ÉàÔºàÊúàÈ£ü„ÉªÊó•È£üÔºâ</span>
                            </div>
                            <i id="icon-astronomical-events" data-lucide="chevron-down" class="w-4 h-4 transition-transform"></i>
                        </button>
                        <div id="content-astronomical-events" class="hidden px-4 pb-4">
                            <div id="astronomical-events" class="space-y-2 text-base">
                                <div class="text-slate-400">Ë®àÁÆó‰∏≠...</div>
                            </div>
                        </div>
                    </div>

                    <!-- ÂõΩÈöõÂÆáÂÆô„Çπ„ÉÜ„Éº„Ç∑„Éß„É≥ (ISS) -->
                    <div class="bg-slate-800/50 rounded-xl border border-slate-700 overflow-hidden">
                        <button onclick="toggleAccordion('iss')" class="w-full p-4 flex items-center justify-between hover:bg-slate-700/30 transition">
                            <div class="flex items-center gap-2">
                                <i data-lucide="satellite" class="w-4 h-4 text-blue-400"></i>
                                <span class="font-semibold text-base">ÂõΩÈöõÂÆáÂÆô„Çπ„ÉÜ„Éº„Ç∑„Éß„É≥ (ISS)</span>
                            </div>
                            <i id="icon-iss" data-lucide="chevron-down" class="w-4 h-4 transition-transform"></i>
                        </button>
                        <div id="content-iss" class="hidden px-4 pb-4">
                            <div id="iss-info" class="space-y-2 text-base">
                                <div class="text-slate-400">Ë®àÁÆó‰∏≠...</div>
                            </div>
                            <!-- ISSÂèØË¶ñ‰∫àÂ†± -->
                            <div id="iss-prediction" class="mt-3 pt-3 border-t border-slate-700 space-y-2 text-base hidden">
                                <div class="flex items-center gap-2 text-yellow-400">
                                    <i data-lucide="eye" class="w-4 h-4"></i>
                                    <span class="font-bold">ÂèØË¶ñ‰∫àÂ†±</span>
                                </div>
                                <div id="iss-prediction-content" class="bg-blue-900/30 rounded-lg p-3 text-sm text-blue-200">
                                    Êù°‰ª∂„ÇíÁ¢∫Ë™ç‰∏≠...
                                </div>
                            </div>

                            <!-- Ê¨°Âõû„Éë„Çπ‰∫àÊ∏¨ -->
                            <div class="mt-3 pt-3 border-t border-slate-700 space-y-2 text-base">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center gap-2 text-green-400">
                                        <i data-lucide="calendar-clock" class="w-4 h-4"></i>
                                        <span class="font-bold">Ê¨°Âõû„Éë„Çπ‰∫àÊ∏¨Ôºà7Êó•ÈñìÔºâ</span>
                                    </div>
                                    <div class="flex items-center gap-2">
                                        <button onclick="requestISSNotificationPermission()" class="text-sm bg-yellow-600/20 hover:bg-yellow-600/30 px-2 py-1 rounded border border-yellow-600/30 text-yellow-300 transition flex items-center gap-1" title="1ÊôÇÈñìÂâçÈÄöÁü•„ÇíÊúâÂäπÂåñ">
                                            <i data-lucide="bell" class="w-3 h-3"></i>
                                            ÈÄöÁü•Ë®≠ÂÆö
                                        </button>
                                        <button onclick="calculateISSPasses()" class="text-sm text-blue-300 hover:text-blue-200 underline">
                                            ÂÜçË®àÁÆó
                                        </button>
                                    </div>
                                </div>
                                <div id="iss-passes-list" class="space-y-1 max-h-64 overflow-y-auto">
                                    <div class="text-slate-400 text-sm">Ë®àÁÆó‰∏≠...</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Â§©„ÅÆÂ∑ùË¶ñË™çÊÄß‰∫àÊ∏¨ -->
                    <div class="bg-slate-800/50 rounded-xl border border-slate-700 overflow-hidden">
                        <button onclick="toggleAccordion('milkyway')" class="w-full p-4 flex items-center justify-between hover:bg-slate-700/30 transition">
                            <div class="flex items-center gap-2">
                                <i data-lucide="sparkles" class="w-4 h-4 text-indigo-400"></i>
                                <span class="font-semibold text-base">Â§©„ÅÆÂ∑ùË¶ñË™çÊÄß‰∫àÊ∏¨</span>
                            </div>
                            <i id="icon-milkyway" data-lucide="chevron-down" class="w-4 h-4 transition-transform"></i>
                        </button>
                        <div id="content-milkyway" class="hidden px-4 pb-4">
                            <div id="milkyway-visibility" class="space-y-2 text-base">
                                <div class="text-slate-400">Ë®àÁÆó‰∏≠...</div>
                            </div>
                        </div>
                    </div>

                    <!-- Â§ßÊ∞óÈÄèÊòéÂ∫¶„Éª„Ç∑„Éº„Ç§„É≥„Ç∞ÊåáÊ®ô -->
                    <div class="bg-slate-800/50 rounded-xl border border-slate-700 overflow-hidden">
                        <button onclick="toggleAccordion('atmospheric')" class="w-full p-4 flex items-center justify-between hover:bg-slate-700/30 transition">
                            <div class="flex items-center gap-2">
                                <i data-lucide="eye" class="w-4 h-4 text-cyan-400"></i>
                                <span class="font-semibold text-base">Â§ßÊ∞óÈÄèÊòéÂ∫¶„Éª„Ç∑„Éº„Ç§„É≥„Ç∞ÊåáÊ®ô</span>
                            </div>
                            <i id="icon-atmospheric" data-lucide="chevron-down" class="w-4 h-4 transition-transform"></i>
                        </button>
                        <div id="content-atmospheric" class="hidden px-4 pb-4">
                            <div id="atmospheric-conditions" class="space-y-2 text-base">
                                <div class="text-slate-400">Ë®àÁÆó‰∏≠...</div>
                            </div>
                        </div>
                    </div>

                    <!-- Â§©‰ΩìÂÜôÁúüÈú≤Âá∫Ë®àÁÆóÊ©ü -->
                    <div class="bg-slate-800/50 rounded-xl border border-slate-700 overflow-hidden">
                        <button onclick="toggleAccordion('exposure')" class="w-full p-4 flex items-center justify-between hover:bg-slate-700/30 transition">
                            <div class="flex items-center gap-2">
                                <i data-lucide="camera" class="w-4 h-4 text-pink-400"></i>
                                <span class="font-semibold text-base">Â§©‰ΩìÂÜôÁúüÈú≤Âá∫Ë®àÁÆóÊ©ü</span>
                            </div>
                            <i id="icon-exposure" data-lucide="chevron-down" class="w-4 h-4 transition-transform"></i>
                        </button>
                        <div id="content-exposure" class="hidden px-4 pb-4">
                            <div class="space-y-3 text-base">
                                <!-- „Ç´„É°„É©Ë®≠ÂÆö -->
                                <div class="space-y-2">
                                    <label class="block text-slate-300 text-sm font-semibold">„Çª„É≥„Çµ„Éº„Çµ„Ç§„Ç∫</label>
                                    <select id="sensor-size" class="w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-base">
                                        <option value="1.0">„Éï„É´„Çµ„Ç§„Ç∫ (35mm)</option>
                                        <option value="1.5">APS-C (Nikon/Sony)</option>
                                        <option value="1.6">APS-C (Canon)</option>
                                        <option value="2.0">„Éû„Ç§„ÇØ„É≠„Éï„Ç©„Éº„Çµ„Éº„Ç∫</option>
                                        <option value="2.7">1Âûã„Çª„É≥„Çµ„Éº</option>
                                    </select>
                                </div>

                                <div class="grid grid-cols-2 gap-2">
                                    <div>
                                        <label class="block text-slate-300 text-sm font-semibold mb-1">ÁÑ¶ÁÇπË∑ùÈõ¢ (mm)</label>
                                        <input type="number" id="focal-length" value="50" min="1" max="3000" class="w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-base">
                                    </div>
                                    <div>
                                        <label class="block text-slate-300 text-sm font-semibold mb-1">FÂÄ§</label>
                                        <input type="number" id="aperture" value="2.8" min="0.7" max="22" step="0.1" class="w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-base">
                                    </div>
                                </div>

                                <div class="grid grid-cols-2 gap-2">
                                    <div>
                                        <label class="block text-slate-300 text-sm font-semibold mb-1">ISOÊÑüÂ∫¶</label>
                                        <select id="iso" class="w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-base">
                                            <option value="100">100</option>
                                            <option value="200">200</option>
                                            <option value="400">400</option>
                                            <option value="800">800</option>
                                            <option value="1600">1600</option>
                                            <option value="3200" selected>3200</option>
                                            <option value="6400">6400</option>
                                            <option value="12800">12800</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-slate-300 text-sm font-semibold mb-1">Ëµ§ÈÅìÂÑÄ</label>
                                        <select id="tracking-mount" class="w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-base">
                                            <option value="none">„Å™„ÅóÔºàÂõ∫ÂÆöÊíÆÂΩ±Ôºâ</option>
                                            <option value="basic">„ÅÇ„ÇäÔºà„Éù„Éº„Çø„Éñ„É´Ôºâ</option>
                                            <option value="advanced">„ÅÇ„ÇäÔºàÈ´òÁ≤æÂ∫¶Ôºâ</option>
                                        </select>
                                    </div>
                                </div>

                                <div>
                                    <label class="block text-slate-300 text-sm font-semibold mb-1">ÊíÆÂΩ±ÂØæË±°</label>
                                    <select id="target-type" class="w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-base">
                                        <option value="landscape">ÊòüÊôØÂÜôÁúüÔºàÈ¢®ÊôØ+ÊòüÁ©∫Ôºâ</option>
                                        <option value="milkyway">Â§©„ÅÆÂ∑ù</option>
                                        <option value="widefield">ÊòüÈáéÂÜôÁúüÔºàÂ∫ÉÂüüÔºâ</option>
                                        <option value="dso">ÊòüÈõ≤„ÉªÊòüÂõ£ÔºàDSOÔºâ</option>
                                        <option value="galaxy">ÈäÄÊ≤≥</option>
                                        <option value="planet">ÊÉëÊòü</option>
                                        <option value="moon">ÊúàÈù¢</option>
                                    </select>
                                </div>

                                <button onclick="calculateExposure()" class="w-full bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white font-semibold py-2 px-4 rounded-lg transition text-base">
                                    <i data-lucide="calculator" class="w-4 h-4 inline mr-2"></i>
                                    Èú≤Âá∫Ë®≠ÂÆö„ÇíË®àÁÆó
                                </button>

                                <!-- Ë®àÁÆóÁµêÊûú -->
                                <div id="exposure-results" class="hidden mt-3 p-3 bg-slate-700/50 rounded-lg border border-slate-600">
                                    <!-- ÁµêÊûú„Åå„Åì„Åì„Å´Ë°®Á§∫„Åï„Çå„Çã -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ‰ªäÂ§úË¶ã„Åà„ÇãÊÉëÊòü -->
                    <div class="bg-slate-800/50 rounded-xl border border-slate-700 overflow-hidden">
                        <button onclick="toggleAccordion('planets')" class="w-full p-4 flex items-center justify-between hover:bg-slate-700/30 transition">
                            <div class="flex items-center gap-2">
                                <i data-lucide="planet" class="w-4 h-4 text-purple-400"></i>
                                <span class="font-semibold text-base">‰ªäÂ§úË¶ã„Åà„ÇãÊÉëÊòü</span>
                            </div>
                            <i id="icon-planets" data-lucide="chevron-down" class="w-4 h-4 transition-transform"></i>
                        </button>
                        <div id="content-planets" class="hidden px-4 pb-4">
                            <div id="visible-planets" class="space-y-2 text-base">
                                <div class="text-slate-400">Ë®àÁÆó‰∏≠...</div>
                            </div>
                        </div>
                    </div>

                    <!-- ÊµÅÊòüÁæ§„Ç´„É¨„É≥„ÉÄ„Éº -->
                    <div class="bg-slate-800/50 rounded-xl border border-slate-700 overflow-hidden">
                        <button onclick="toggleAccordion('meteors')" class="w-full p-4 flex items-center justify-between hover:bg-slate-700/30 transition">
                            <div class="flex items-center gap-2">
                                <i data-lucide="zap" class="w-4 h-4 text-yellow-400"></i>
                                <span class="font-semibold text-base">ÊµÅÊòüÁæ§„Ç´„É¨„É≥„ÉÄ„Éº</span>
                            </div>
                            <i id="icon-meteors" data-lucide="chevron-down" class="w-4 h-4 transition-transform"></i>
                        </button>
                        <div id="content-meteors" class="hidden px-4 pb-4">
                            <div id="meteor-showers" class="space-y-2 text-base">
                                <div class="text-slate-400">Ë™≠„ÅøËæº„Åø‰∏≠...</div>
                            </div>
                        </div>
                    </div>

                    <!-- ÊúàÈΩ¢„Å´„Çà„ÇãË¶≥Ê∏¨Êé®Â•®Â§©‰Ωì -->
                    <div class="bg-slate-800/50 rounded-xl border border-slate-700 overflow-hidden">
                        <button onclick="toggleAccordion('recommended')" class="w-full p-4 flex items-center justify-between hover:bg-slate-700/30 transition">
                            <div class="flex items-center gap-2">
                                <i data-lucide="telescope" class="w-4 h-4 text-green-400"></i>
                                <span class="font-semibold text-base">ÊúàÈΩ¢„Å´„Çà„ÇãË¶≥Ê∏¨Êé®Â•®Â§©‰Ωì</span>
                            </div>
                            <i id="icon-recommended" data-lucide="chevron-down" class="w-4 h-4 transition-transform"></i>
                        </button>
                        <div id="content-recommended" class="hidden px-4 pb-4">
                            <div id="recommended-objects" class="space-y-2 text-base">
                                <div class="text-slate-400">Ë®àÁÆó‰∏≠...</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Ë¶≥Ê∏¨ÈÅ©ÊÄß„É¨„Éº„ÉÄ„Éº„ÉÅ„É£„Éº„Éà -->
            <div id="section-charts" class="glass-panel rounded-2xl p-4 md:p-6">
                <h3 class="text-xl font-semibold mb-4 flex items-center gap-2">
                    <i data-lucide="radar" class="text-pink-400 w-5 h-5"></i> Ë¶≥Ê∏¨ÈÅ©ÊÄß„É¨„Éº„ÉÄ„Éº„ÉÅ„É£„Éº„Éà
                </h3>
                <div class="relative h-80 w-full">
                    <canvas id="radarChart"></canvas>
                </div>
                <p class="text-sm text-slate-400 mt-2 text-center">ÂêÑË¶ÅÁ¥†„ÅåÂ§ñÂÅ¥„Å´Ëøë„ÅÑ„Åª„Å©Ë¶≥Ê∏¨„Å´ÈÅ©„Åó„ÅüÊù°‰ª∂„Åß„Åô</p>
            </div>

            <!-- „ÉÅ„É£„Éº„Éà„Çª„ÇØ„Ç∑„Éß„É≥ -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <!-- Ê∞óÊ∏©„ÉÅ„É£„Éº„Éà -->
                <div class="glass-panel rounded-2xl p-4 md:p-6">
                    <h3 class="text-xl font-semibold mb-4 flex items-center gap-2">
                        <i data-lucide="clock" class="text-orange-400 w-5 h-5"></i> Ê∞óÊ∏©‰∫àÂ†± (ÊåáÂÆöÊôÇÂàª„Çà„Çä24ÊôÇÈñì)
                    </h3>
                    <div class="relative h-64 w-full">
                        <canvas id="tempChart"></canvas>
                    </div>
                </div>

                <!-- Èõ≤„ÅÆÁ©çÂ±§„ÉÅ„É£„Éº„Éà -->
                <div class="glass-panel rounded-2xl p-4 md:p-6">
                    <h3 class="text-xl font-semibold mb-4 flex items-center gap-2">
                        <i data-lucide="layers" class="text-blue-400 w-5 h-5"></i> Èõ≤ÈáèÊé®Áßª (ÊåáÂÆöÊôÇÂàª„Çà„Çä24ÊôÇÈñì)
                    </h3>
                    <div class="relative h-64 w-full">
                        <canvas id="cloudChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- ÈÄ±ÈñìÂ§©Ê∞ó‰∫àÂ†± -->
            <div id="section-weekly" class="glass-panel rounded-2xl p-4 md:p-6">
                <h3 class="text-xl font-semibold mb-4 flex items-center gap-2">
                    <i data-lucide="calendar" class="text-green-400 w-5 h-5"></i> ÈÄ±ÈñìÂ§©Ê∞ó‰∫àÂ†±
                    <span class="text-sm font-normal text-slate-400 ml-2">‚ÄªÊó•‰ªò„Çí„ÇØ„É™„ÉÉ„ÇØ„Åô„Çã„Å®„Åù„ÅÆÊó•„ÅÆË©≥Á¥∞„ÇíË°®Á§∫„Åó„Åæ„Åô</span>
                </h3>
                <div class="overflow-x-auto">
                    <table class="w-full text-left border-collapse min-w-[600px]">
                        <thead>
                            <tr class="text-slate-400 text-base border-b border-slate-700">
                                <th class="py-3 px-2">Êó•‰ªò</th>
                                <th class="py-3 px-2">Â§©Ê∞ó</th>
                                <th class="py-3 px-2 text-center">ÈôçÊ∞¥Á¢∫Áéá / Èáè</th>
                                <th class="py-3 px-2 text-center">Âπ≥ÂùáÈõ≤Èáè</th>
                                <th class="py-3 px-2 text-center">Âπ≥ÂùáÊπøÂ∫¶</th>
                                <th class="py-3 px-2 text-center">ÊúàÈΩ¢</th>
                                <th class="py-3 px-2 text-right">ÊúÄÈ´ò / ÊúÄ‰ΩéÊ∞óÊ∏©</th>
                            </tr>
                        </thead>
                        <tbody id="weekly-forecast-body" class="text-base md:text-lg">
                            <!-- JS„ÅßÁîüÊàê -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- „Éï„ÉÉ„Çø„Éº (API„ÇØ„É¨„Ç∏„ÉÉ„Éà & Ëëó‰ΩúÊ®©) -->
        <footer class="glass-panel rounded-xl p-4 text-center text-slate-400 text-base">
            <p class="mb-2">
                Data sources: 
                <a href="https://open-meteo.com/" target="_blank" rel="noopener noreferrer" class="text-blue-300 hover:underline">Open-Meteo</a> (Weather Data), 
                <a href="https://www.openstreetmap.org/copyright" target="_blank" rel="noopener noreferrer" class="text-blue-300 hover:underline">OpenStreetMap</a> (Map & Address Data) & 
                <a href="https://celestrak.org/" target="_blank" rel="noopener noreferrer" class="text-blue-300 hover:underline">CelesTrak</a> (ISS TLE Data)
            </p>
            <p class="text-sm border-t border-slate-700/50 pt-2 md:text-base">
                &copy; 2026 Ê†™Âºè‰ºöÁ§æ„É™„Éê„Éº„É©„É≥„Ç∫„Éª„Ç≥„É≥„Çµ„É´„ÉÜ„Ç£„É≥„Ç∞
            </p>
        </footer>

    </div>

    <!-- ISSÊòüÂ∫ßÂõ≥„É¢„Éº„ÉÄ„É´ -->
    <div id="iss-skymap-modal" class="hidden fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50" onclick="closeISSSkymapModal(event)">
        <div class="bg-slate-900 rounded-2xl p-6 max-w-4xl w-full mx-4 border border-slate-700" onclick="event.stopPropagation()">
            <div class="flex items-center justify-between mb-4">
                <h3 class="text-2xl font-bold flex items-center gap-2">
                    <i data-lucide="compass" class="w-6 h-6 text-blue-400"></i>
                    ÁèæÂú®‰ΩçÁΩÆ„Åã„ÇâË¶ã„Åà„ÇãÁ©∫ÔºàÊòüÂ∫ßÂõ≥Ôºâ
                </h3>
                <button onclick="closeISSSkymapModal()" class="text-slate-400 hover:text-white">
                    <i data-lucide="x" class="w-6 h-6"></i>
                </button>
            </div>
            <div class="space-y-3">
                <div id="iss-skymap-info" class="text-base text-slate-300 bg-slate-800/50 rounded-lg p-3"></div>
                <div class="bg-black rounded-lg overflow-hidden border border-slate-700">
                    <canvas id="iss-skymap-canvas" width="800" height="600" class="w-full"></canvas>
                </div>
                <div class="text-sm text-slate-400 space-y-1">
                    <div class="flex items-center gap-2">
                        <span class="inline-block w-3 h-3 bg-red-500 rounded-full"></span>
                        <span>ISS‰ΩçÁΩÆÔºàË¶ñÈáéÂÜÖ„ÅÆÂ†¥Âêà„ÅÆ„ÅøË°®Á§∫Ôºâ</span>
                    </div>
                    <div class="flex items-center gap-2">
                        <span class="inline-block w-3 h-3 bg-orange-500 rounded-full"></span>
                        <span>Â§™ÈôΩÔºàÈ´òÂ∫¶>0Â∫¶Ôºâ</span>
                    </div>
                    <div class="flex items-center gap-2">
                        <span class="inline-block w-3 h-3 bg-white rounded-full border border-slate-400"></span>
                        <span>ÊúàÔºàÈ´òÂ∫¶>0Â∫¶Ôºâ</span>
                    </div>
                    <div class="flex items-center gap-2">
                        <span class="inline-block w-3 h-3 bg-yellow-400 rounded-full"></span>
                        <span>ÊÉëÊòüÔºàÈ´òÂ∫¶>0Â∫¶Ôºâ</span>
                    </div>
                    <div>‚Äª Ë¶≥Ê∏¨Âú∞ÁÇπ„Åã„ÇâË¶ã„Åà„ÇãÁ©∫„ÇíÊñπ‰ΩçËßí„ÉªÈ´òÂ∫¶„ÅßË°®Á§∫ÔºàÂú∞Âπ≥Â∫ßÊ®ôÁ≥ªÔºâ</div>
                    <div class="text-sm">‚Äª astronomy-engine„ÅÆÂà∂Èôê„Å´„Çà„ÇäÊÅíÊòü„ÅØË°®Á§∫„Åï„Çå„Åæ„Åõ„Çì</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Â§©Êñá„Ç§„Éô„É≥„ÉàË©≥Á¥∞„É¢„Éº„ÉÄ„É´ -->
    <div id="eclipse-detail-modal" class="hidden fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50" onclick="closeEclipseDetailModal(event)">
        <div class="bg-slate-900 rounded-2xl p-6 max-w-2xl w-full mx-4 border border-slate-700 max-h-[90vh] overflow-y-auto" onclick="event.stopPropagation()">
            <div class="flex items-center justify-between mb-4">
                <h3 class="text-2xl font-bold flex items-center gap-2">
                    <i data-lucide="moon" class="w-6 h-6 text-orange-400"></i>
                    Â§©Êñá„Ç§„Éô„É≥„ÉàË©≥Á¥∞
                </h3>
                <button onclick="closeEclipseDetailModal()" class="text-slate-400 hover:text-white">
                    <i data-lucide="x" class="w-6 h-6"></i>
                </button>
            </div>
            <div id="eclipse-detail-content" class="text-base text-slate-300">
                <div class="text-slate-400">Ë™≠„ÅøËæº„Åø‰∏≠...</div>
            </div>
        </div>
    </div>

    <script type="module" src="main.js?v=3.3.6"></script>
</body>
</html>

# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [2.3.6] - 2026-01-15

### Added
- ISS視認可能範囲内の表示機能を追加
- 仰角0度以上（地平線上）の場合に「視認可能範囲内」と表示
- 観測条件に応じて2段階の表示（最適条件/視認可能範囲内）

### Changed
- ISS可視予報の表示を改善し、視認可能範囲と最適観測条件を区別
- 仰角が低い場合や日中の場合に注意メッセージを表示

### Improved
- ISSの現在位置から観測地点への視認可能性をより明確に表示
- 地平線上にある場合は必ず視認可能範囲内として表示

## [2.3.5] - 2026-01-15

### Changed
- 観測期間を日没～日の出から、天文薄明終了～天文薄明開始に変更
- 星空視認性スコアを天文薄明終了から天文薄明開始までの平均雲量で計算
- 天体観測予報の時間帯別評価も天文薄明基準に変更

### Fixed
- 日没直後（まだ空が明るい時間帯）が観測期間に含まれていた問題を修正
- 時間帯別雲量と星空視認性スコアの不一致問題を改善

### Added
- デバッグログ機能を追加（開発者ツールのコンソールで計算値を確認可能）

### Improved
- 実際の天体観測の実態（天文薄明終了後から本格的な観測が可能）に合わせた評価

## [2.3.4] - 2026-01-15

### Changed
- 観測期間を固定時間帯（20:00-04:00）から実際の日没～翌日の日の出までに変更
- 星空視認性スコアを日没から日の出までの平均雲量で計算するように改善
- レーダーチャートの雲晴れ度も実際の観測可能時間に基づいて表示
- 天体観測予報の時間帯別評価を、観測期間を4等分した動的な時間帯で表示
- 天体観測予報に観測期間（日没～日の出の時刻）を明示

### Improved
- 季節や緯度によって異なる観測可能時間に対応し、より実態に即した評価を実現
- 夏至（日没が遅く日の出が早い）と冬至（日没が早く日の出が遅い）で適切に評価が変化

## [2.3.3] - 2026-01-15

### Changed
- 天体観測予報の評価基準をより厳格化（絶好: 10%未満、良好: 25%未満、やや雲多: 50%未満、不向き: 50%以上）
- 天体観測予報に時間帯別の詳細評価を追加（20-22時、22-24時、0-2時、2-4時の4つの時間帯で雲量と評価を表示）
- 星空視認性スコアの計算を、指定時刻の雲量から夜間平均雲量（20:00-04:00）ベースに変更
- レーダーチャートの「雲晴れ度」も夜間平均雲量を使用するように変更

### Fixed
- 雲量推移グラフと天体観測評価が食い違う問題を解決
- 雲が多い状況でも「観測に適している」と高評価になっていた問題を修正
- 時間帯によって雲量が大きく変動する場合でも、実態に即した評価を表示

## [2.3.2] - 2026-01-15

### Fixed
- 天体観測予報で指定日時の翌日が表示される問題を修正
- 日の出入り・天文薄明の計算を指定日の0時0分基準に変更
- 夜の時刻（例：20:00）を指定した場合でも、正しく当日の日の出入り時刻を表示するように改善

## [2.3.1] - 2026-01-15

### Fixed
- 日時選択機能の時間変更ができない問題を修正
- datetime-local inputにstep="900"属性を追加し、15分刻みでの時間変更を可能に
- 日付と時刻の両方を確実に変更できるように改善

### Changed
- datetime-local inputにtitle属性を追加してユーザビリティを向上

## [2.3.0] - 2026-01-15

### Added
- TLEベースのISS追跡機能を実装（satellite.jsライブラリを使用）
- CelesTrakからリアルタイムでISSのTLEデータを自動取得
- ISS可視予報機能を追加（観測地点からの可視性を計算）
- 天体イベント情報セクションにアコーディオン表示を実装
- 4つのパネル（ISS、惑星、流星群、推奨天体）を個別に展開/折りたたみ可能に

### Changed
- 不安定なOpen Notify APIからTLEベースの計算方式に変更
- 天体イベント情報のレイアウトを縦積みアコーディオン形式に変更
- デフォルトで全パネルを折りたたみ状態にし、省スペース化を実現
- satellite.js v5.0.0をCDN経由で読み込み

## [2.2.1] - 2026-01-15

### Removed
- Open Notify API依存のISS現在位置機能を削除（API不安定のため）
- ISS乗員情報機能を削除（API不安定のため）

## [2.2.0] - 2026-01-15

### Added
- ISS現在位置表示機能（Open Notify API使用）
- リアルタイムISS位置情報（緯度・経度・タイムスタンプ）の表示

### Changed
- ISS通過予報からISS現在位置表示に機能を移行
- Open Notify API エンドポイントを /iss-pass.json から /iss-now.json に変更

## [2.1.0] - 2026-01-14

### Added
- ISS乗員情報表示機能（Open Notify API使用）
- 現在ISSに滞在中の宇宙飛行士の人数と名前をリアルタイム表示
- Open Notify API の /astros.json エンドポイントを統合

## [2.0.0] - 2026-01-14

### Added
- 星空視認性スコア機能（雲量・月明かり・湿度・視程・風速を総合評価）
- 追加気象データ（風速・風向・気圧・露点・視程）の表示
- 天文薄明・日月出没時刻表示機能
- 24時間観測適性タイムライン
- ナイトビジョンモード（赤色表示で暗順応を妨げない）
- お気に入り地点機能（最大5件登録可能）
- 観測適性レーダーチャート
- 天体イベント情報セクション（惑星・流星群・推奨天体）

### Changed
- UIを大幅に刷新し、天体観測に特化したダッシュボードに変更

## [1.5.3] - 2026-01-13

### Removed
- 月の出データを削除

### Changed
- バージョン番号を復元

## [1.5.1] - 日付不明

### Added
- 日時指定機能
- 週間予報クリック機能

## [1.0.0] - 日付不明

### Added
- 初回リリース
- 基本的な天気ダッシュボード機能
- 気温・雲量の表示
- 週間予報機能
